
:root{
  --brand-blue: #27A7FF;
  --brand-yellow: #FFC82C;
  --brand-pink: #FF4FA2;
  --brand-ink: #0b0f19;
  /* Glass tokens */
  --glass-blur: 16px;
  --glass-sat: 180%;
  --glass-bg-dark: rgba(17,25,40,.55);
  --glass-bg-dark-2: rgba(17,25,40,.35);
  --glass-bg-light: rgba(255,255,255,.65);
  --glass-bg-light-2: rgba(255,255,255,.45);
  --glass-border-dark: rgba(255,255,255,.12);
  --glass-border-light: rgba(0,0,0,.08);
  --glass-highlight: rgba(255,255,255,.22);
}
.dark{
  color-scheme: dark;
}
.btn{
  border-radius: 1rem;
  font-weight: 600;
  padding: 0.6rem 1rem;
}
.btn-primary{
  background: var(--brand-blue);
  color: #0b0f19;
}
.btn-primary:hover{ filter: brightness(1.08); }
.btn-accent{
  background: var(--brand-yellow);
  color: #0b0f19;
}
.badge{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  padding: .2rem .5rem;
  border-radius: .6rem;
  background: rgba(255,255,255,.12);
}
.brand-gradient{
  background-image: radial-gradient(1200px 600px at -10% -10%, rgba(39,167,255,.35), transparent 50%),
                    radial-gradient(800px 400px at 110% 0%, rgba(255,200,44,.25), transparent 55%),
                    radial-gradient(600px 400px at 50% 100%, rgba(255,79,162,.18), transparent 55%);
  animation: bg-pan 30s linear infinite;
}
@keyframes bg-pan { 0%{ background-position: 0 0, 100% 0, 50% 100%; } 50%{ background-position: -50% -20%, 120% 10%, 60% 110%; } 100%{ background-position: 0 0, 100% 0, 50% 100%; } }
.card{
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 1.25rem;
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  box-shadow: 0 10px 30px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.12);
}
.card:hover{ background: rgba(255,255,255,.08); }
.hero{
  border-radius: 1.5rem;
  background: radial-gradient(800px 400px at 20% -10%, rgba(39,167,255,.18), transparent 50%),
              radial-gradient(600px 300px at 80% -10%, rgba(255,200,44,.22), transparent 55%),
              radial-gradient(700px 300px at 50% 110%, rgba(255,79,162,.14), transparent 60%),
              linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
  position: relative;
  overflow: hidden;
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
}
.logo-drop{
  filter: drop-shadow(0 10px 30px rgba(39,167,255,.35)) drop-shadow(0 0 8px rgba(0,0,0,.35));
}

/* Top nav: stronger glass saturation */
body > nav.sticky{
  -webkit-backdrop-filter: blur(14px) saturate(180%);
  backdrop-filter: blur(14px) saturate(180%);
}

/* Accessibility: visible focus styles */
a, button, [role="button"], input, select, textarea, .btn, .pill, .chip, .store-card{
  outline: none;
}
a:focus-visible, button:focus-visible, [role="button"]:focus-visible,
input:focus-visible, select:focus-visible, textarea:focus-visible,
.btn:focus-visible, .pill:focus-visible, .chip:focus-visible, .store-card:focus-visible{
  box-shadow: 0 0 0 3px rgba(39,167,255,.55), 0 0 0 6px rgba(39,167,255,.22);
}

/* Skip link */
.skip-link{
  position: absolute; left: 8px; top: -40px; z-index: 60;
  padding: .5rem .75rem; border-radius: .75rem;
  background: rgba(255,255,255,.9); color: #0b0f19;
  transition: top .15s ease;
}
.dark .skip-link{ background: rgba(17,25,40,.9); color: #e2e8f0; }
.skip-link:focus{ top: 8px; }

/* Visually hidden (for screen-reader only labels) */
.sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

/* Mobile bottom nav: safe-area + fixed stability on iOS */
.mobile-nav{
  padding-bottom: calc(.5rem + env(safe-area-inset-bottom));
  position: fixed; /* reinforce against class order issues */
  left: 0; right: 0; bottom: 0;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  will-change: transform;
  contain: layout paint; /* isolate to avoid weird scroll containers */
  backface-visibility: hidden;
}
/* Dynamic viewport height for correct layout spacing on mobile */
.min-h-screen{ min-height: 100vh; }
@supports (height: 100dvh){
  .min-h-screen{ min-height: 100dvh; }
}

/* Mobile helpers */
.mobile-full{ width: 100%; }
@media (min-width: 640px){ .mobile-full{ width: auto; } }
@media (max-width: 640px){
  .widget{ animation: none; }
}

/* Light theme refinements */
.light .card{
  background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.70));
  border: 1px solid var(--glass-border-light);
}
.light .card:hover{ background: rgba(0,0,0,.05); }
.light .badge{ background: rgba(0,0,0,.08); }
.light .brand-gradient{
  background-image: radial-gradient(1200px 600px at -10% -10%, rgba(39,167,255,.25), transparent 50%),
                    radial-gradient(800px 400px at 110% 0%, rgba(255,200,44,.18), transparent 55%),
                    radial-gradient(600px 400px at 50% 100%, rgba(255,79,162,.12), transparent 55%);
}
/* Light form fields for contrast */
.light input[type="text"],
.light input[type="number"],
.light input[type="date"],
.light input[type="email"],
.light input[type="tel"],
.light select,
.light textarea{
  background: rgba(0,0,0,.03) !important;
  border-color: rgba(0,0,0,.12) !important;
  color: #0f172a !important;
}
.light label{ color: #334155; }

/* Pills for filters */
.pill{ border: 1px solid rgba(255,255,255,.2); background: rgba(255,255,255,.08); border-radius: 9999px; }
.pill.active{ border-color: rgba(255,255,255,.35); background: rgba(255,255,255,.12); }
.light .pill{ border-color: rgba(0,0,0,.12); background: rgba(0,0,0,.04); }
.light .pill.active{ border-color: rgba(0,0,0,.2); background: rgba(0,0,0,.06); }

/* Light tweaks for sparkles and neon */
.light .neon{ text-shadow: 0 0 6px rgba(39,167,255,.45), 0 0 18px rgba(39,167,255,.25); }
/* Light hero variant */
.light .hero{
  background: radial-gradient(800px 400px at 20% -10%, rgba(39,167,255,.20), transparent 50%),
              radial-gradient(600px 300px at 80% -10%, rgba(255,200,44,.20), transparent 55%),
              radial-gradient(700px 300px at 50% 110%, rgba(255,79,162,.14), transparent 60%),
              linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.70));
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
}

/* Animated sheen over hero */
@keyframes heroSheen { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
.hero::after{
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.06) 20%, transparent 40%);
  filter: blur(0.5px);
  animation: heroSheen 6s ease-in-out infinite;
  pointer-events: none;
}

/* Premium animations */
@keyframes shimmerMove { from { background-position: 0% 50%; } to { background-position: 200% 50%; } }

/* Remove initial opacity fade; use quick slide-in */
.reveal { transform: translateX(14px); }
.reveal.in-view { transform: none; transition: transform .22s ease-out; }
.stagger > * { transform: translateX(16px); transition: transform .22s ease-out; }
.stagger > *:nth-child(2n) { transform: translateX(-16px); }
.stagger.in-view > * { transform: none; }
.stagger.in-view > *:nth-child(1){ transition-delay: .05s }
.stagger.in-view > *:nth-child(2){ transition-delay: .10s }
.stagger.in-view > *:nth-child(3){ transition-delay: .15s }
.stagger.in-view > *:nth-child(4){ transition-delay: .20s }
.stagger.in-view > *:nth-child(5){ transition-delay: .25s }
.stagger.in-view > *:nth-child(6){ transition-delay: .30s }

.widget { position: relative; overflow: hidden; }
.widget-accent{ position:absolute; inset: 0 0 auto 0; height: 6px; border-top-left-radius: 1.2rem; border-top-right-radius: 1.2rem; opacity:.9 }
.widget-accent.accent-emerald,
.widget-accent.accent-blue,
.widget-accent.accent-violet,
.widget-accent.accent-amber,
.widget-accent.accent-pink{
  background-size: 100% 100%;
}

/* Count-up numbers smooth font rendering */
.countup { will-change: contents; }

/* Progress bar animation */
.progress > span { width: 0; transition: width .9s cubic-bezier(.2,.7,.2,1); }

/* Reduce motion respect */
@media (prefers-reduced-motion: reduce){
  .reveal, .reveal.in-view { transform: none; animation: none !important; }
  .stagger > *, .stagger.in-view > * { transform: none !important; }
  .progress > span { transition: none; }
  .widget-accent { animation: none; }
}

/* Widgets: polished, glassy tiles with soft hover */
.widget{
  position: relative;
  border-radius: 1.25rem;
  border: 1px solid rgba(255,255,255,.14);
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  box-shadow: 0 10px 28px rgba(0,0,0,.20), inset 0 1px 0 rgba(255,255,255,.10);
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.widget:hover{
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 14px 28px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.08);
}
.widget[data-tilt]{ will-change: transform; transform-style: preserve-3d; }
.widget[data-tilt] *{ transform: translateZ(0); }
.light .widget{
  border: 1px solid var(--glass-border-light);
  background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.70));
  box-shadow: 0 10px 24px rgba(0,0,0,.10), inset 0 1px 0 rgba(255,255,255,.9);
}
.light .widget:hover{ box-shadow: 0 14px 28px rgba(0,0,0,.12); }

/* Hover-reveal expansion */
.widget-extra{ max-height: 0; overflow: hidden; transform: translateY(8px); will-change: max-height, transform, margin-top; transition: max-height .7s ease-in-out, transform .7s ease-in-out, margin-top .7s ease-in-out; }
.widget:hover .widget-extra, .widget:focus-within .widget-extra{
  max-height: 1000px; transform: none; margin-top: .5rem;
}

@media (prefers-reduced-motion: reduce){
  .widget:hover{ transform: none; }
  .widget-extra{ transition: none; }
}

@media (hover: none){
  .widget-extra{ max-height: 0 !important; margin-top: 0 !important; transform: none !important; }
}

/* When any metric in the group is hovered, open all sibling panels (desktop only) */
@media (hover: hover){
  .metrics-sync.sync-open .widget-extra{ max-height: 1000px; transform: none; margin-top: .5rem; }
  /* Pure CSS fallback: hover anywhere in the metrics row opens all panels */
  .metrics-sync:hover .widget-extra,
  .metrics-sync:focus-within .widget-extra{ max-height: 1000px; transform: none; margin-top: .5rem; }
}

/* Thin accent bar per widget */
.widget-accent{ position:absolute; inset: 0 0 auto 0; height: 6px; border-top-left-radius: 1.2rem; border-top-right-radius: 1.2rem; opacity:.9 }
.accent-blue{ background: linear-gradient(90deg, #27A7FF, #7cc7ff); }
.accent-emerald{ background: linear-gradient(90deg, #10b981, #34d399); }
.accent-violet{ background: linear-gradient(90deg, #8b5cf6, #a78bfa); }
.accent-amber{ background: linear-gradient(90deg, #f59e0b, #fbbf24); }
.accent-pink{ background: linear-gradient(90deg, #ec4899, #f472b6); }

/* Metric typography */
.metric-lg{ font-size: 2.25rem; line-height: 1.1; font-weight: 800; letter-spacing: -0.02em; }
.metric-sm{ font-size: 1.125rem; font-weight: 600; }
.muted{ color: rgba(226,232,240,.8); }
.light .muted{ color: rgba(15,23,42,.7); }

/* Tiny progress */
.progress{ height: .6rem; border-radius: 9999px; overflow: hidden; background: rgba(255,255,255,.12); }
.progress > span{ display:block; height:100%; background: linear-gradient(90deg, #10b981, #34d399); }
.light .progress{ background: rgba(0,0,0,.08); }

/* List rows */
.list-row{ display:flex; align-items:center; justify-content:space-between; padding:.35rem 0; }
.list-title{ color:#e2e8f0; }
.light .list-title{ color:#0f172a; }

/* Overload animations */
/* Removed float bobbing for a calmer UI */
.widget { animation: none; }

/* Card shine */
.card{ position: relative; overflow: hidden; }
.card::after{
  content:''; position:absolute; inset:auto -30% 0 auto; top:-150%; width:60%; height:300%;
  background: linear-gradient(120deg, rgba(255,255,255,0) 30%, rgba(255,255,255,.16) 50%, rgba(255,255,255,0) 70%);
  transform: rotate(25deg) translateY(-120%);
  transition: transform .6s ease;
  pointer-events: none;
}
.card:hover::after{ transform: rotate(25deg) translateY(0%); }

/* Liquid glass edge highlight */
.card::before, .widget::before, .hero::before{
  content:''; position:absolute; inset:1px; border-radius: inherit; pointer-events:none;
  background: linear-gradient(180deg, rgba(255,255,255,.20), rgba(255,255,255,.04));
  mask: linear-gradient(#000,#000) content-box, linear-gradient(#000,#000);
  -webkit-mask: linear-gradient(#000,#000) content-box, linear-gradient(#000,#000);
  -webkit-mask-composite: xor; mask-composite: exclude;
  padding: 1px; /* inner 1px highlight */
  opacity: .6;
}

/* Neon headings (no opacity animation) */
.neon{ text-shadow: 0 0 6px rgba(39,167,255,.8), 0 0 24px rgba(39,167,255,.35); }
/* Removed neonFlicker animation to eliminate opacity effects */

/* Pulsing buttons + ripple */
.btn{ position: relative; overflow: hidden; }
.btn-primary{ background: linear-gradient(90deg, var(--brand-blue), #6fd2ff); -webkit-backdrop-filter: blur(8px) saturate(160%); backdrop-filter: blur(8px) saturate(160%); }
.ripple{ position:absolute; border-radius: 9999px; transform: translate(-50%,-50%) scale(0); background: rgba(255,255,255,.6); animation: ripple .6s ease-out; pointer-events: none; }
@keyframes ripple { to { transform: translate(-50%,-50%) scale(12); opacity: 0 } }

/* Badges pop */
.badge{ }

/* Store-specific polish */
.store-hero{ background: radial-gradient(900px 400px at 0% -10%, rgba(39,167,255,.18), transparent 50%),
                         radial-gradient(900px 400px at 100% -10%, rgba(255,200,44,.15), transparent 55%); }
.pill-alt{ border:1px solid rgba(255,255,255,.15); background: rgba(255,255,255,.06); border-radius:9999px; padding:.35rem .7rem; white-space:nowrap }
.pill-alt.active{ border-color: rgba(255,255,255,.3); background: rgba(255,255,255,.12); }
.ratio-4x5{ position:relative; width:100%; padding-top:125%; border-radius: .75rem; overflow:hidden; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08); }
.ratio-4x5 > img{ position:absolute; inset:0; margin:auto; max-width:100%; max-height:100%; width:auto; height:auto; object-fit:contain; }
.store-card{ transition: transform .2s ease, box-shadow .2s ease, background .2s ease; }
.store-card:hover{ transform: translateY(-3px); box-shadow: 0 16px 30px rgba(0,0,0,.25); }
.store-arrows button{ backdrop-filter: blur(6px); }
.no-scrollbar{ -ms-overflow-style: none; scrollbar-width: none; }
.no-scrollbar::-webkit-scrollbar{ display: none; }
.image-track{ display:flex; overflow-x:auto; scroll-snap-type: x mandatory; }
.image-slide{ flex: 0 0 100%; scroll-snap-align: center; }

/* Modern store card styling */
.card-glass{
  background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.05));
  border: 1px solid rgba(255,255,255,.16);
  border-radius: 1rem;
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  box-shadow: 0 12px 28px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.18);
}
.chip{ font-size:.75rem; padding:.2rem .6rem; border-radius:9999px; border:1px solid rgba(255,255,255,.18); background: rgba(255,255,255,.08); }
.badge,
.pill,
.pill-alt{
  -webkit-backdrop-filter: blur(8px) saturate(160%);
  backdrop-filter: blur(8px) saturate(160%);
}
.btn-ghost{ background: rgba(0,0,0,.35); color: #fff; border-radius: .65rem; -webkit-backdrop-filter: blur(10px) saturate(140%); backdrop-filter: blur(10px) saturate(140%); }
.btn-ghost:hover{ background: rgba(0,0,0,.5); }
.store-arrow{ position:absolute; top:50%; transform: translateY(-50%); padding:.4rem .6rem; }
.store-arrow.left{ left:.5rem; }
.store-arrow.right{ right:.5rem; }
.dot{ width:.4rem; height:.4rem; border-radius:9999px; background: rgba(255,255,255,.45); }
.dot.active{ background:#fff; }

/* Sparkles removed per request */

/* Reduced motion hard stop for overload extras */
@media (prefers-reduced-motion: reduce){
  .brand-gradient, .widget, .card, .badge { animation: none !important; }
}

/* Co‑manager money blur: blur monetary values but keep layout */
.cmgr .money{ filter: blur(7px); user-select: none; pointer-events: none; }
@keyframes valuePulse { 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-1px) } }
.cmgr .money{ animation: valuePulse 1.2s ease-in-out infinite; }
