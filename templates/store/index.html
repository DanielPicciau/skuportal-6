{% extends 'base.html' %}
{% block content %}
  <div class="max-w-6xl mx-auto">
    <div class="hero card p-6 mb-6">
      <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">Storefront (Dev)</h1>
      <p class="text-slate-300">Preview of listed items. This page isn’t linked in the app.</p>
      <form method="get" class="mt-4 grid grid-cols-1 md:grid-cols-4 gap-2">
        <input name="q" value="{{ q }}" placeholder="Search products, brand, SKU…" class="bg-white/10 border border-white/10 rounded-xl p-3" />
        <select name="brand" class="bg-white/10 border border-white/10 rounded-xl p-3">
          <option value="">All brands…</option>
          {% for b in brands %}<option value="{{ b }}" {% if brand == b %}selected{% endif %}>{{ b }}</option>{% endfor %}
        </select>
        <select name="cat" class="bg-white/10 border border-white/10 rounded-xl p-3">
          <option value="">All categories…</option>
          {% for c in categories %}<option value="{{ c }}" {% if cat == c %}selected{% endif %}>{{ c }}</option>{% endfor %}
        </select>
        <button class="btn btn-primary">Filter</button>
      </form>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      {% for v in items %}
        <div class="widget p-3">
          <div class="widget-accent accent-blue"></div>
          {% with img=v.images.all.0 %}
            {% if img %}
              <img src="{{ img.image.url }}" class="w-full h-40 object-cover rounded-lg" alt="">
            {% else %}
              <div class="w-full h-40 rounded-lg bg-white/10 border border-white/10 flex items-center justify-center text-slate-400">No image</div>
            {% endif %}
          {% endwith %}
          <div class="mt-2 text-sm text-slate-400">{{ v.product.brand }} • {{ v.product.category }}</div>
          <div class="font-semibold line-clamp-2">{{ v.product.name }}</div>
          <div class="mt-1 text-sm">Size: {{ v.size }}{% if v.colour %} • {{ v.colour }}{% endif %}</div>
          <div class="mt-2 text-lg font-bold">£{{ v.price|floatformat:2 }}</div>
          <div class="text-xs text-slate-400 mt-1">SKU: {{ v.variant_sku }}</div>
        </div>
      {% empty %}
        <div class="col-span-full text-slate-400">No items found.</div>
      {% endfor %}
    </div>
  </div>
{% endblock %}

